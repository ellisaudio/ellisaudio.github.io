<!DOCTYPE html>

<!--<html>-->
<div id="container">
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <?!=include("Style Sheet");?>
    <div ng-include="'Header.html'"></div>
    <!--<?!=include("Header");?>-->
    <div id="body">
  <!--<body>-->
  <div class="row" style="text-align:center; color:white;margin:auto;"> 
  <div class="col-12">
  <h1 id="page-header" style="margin:auto;text-align:center;margin-top:1%;font-size:xx-large;"><?=page?></h1>
  </div>
  </div>
  <div class="row">
    <div class="col-4" style="min-height:0 margin-bottom:0;">
  </div>
  <div class="col-5" /*style="color:white;padding:0;margin:0;width:85%;min-height:0;margin-top:0.5%;margin-bottom:0.5%;"*/>
  
<div class="dropdown">
  <button class="dropbtn" id="filter-btn" style="display:none;">Filter</button>
  <div id="filter-options" class="dropdown-content">
    <a href="#">Loading...</a>
  </div>
</div>
  </div>
  </div>
  <div class="row">
  </div>
  <div class='col-4' style='margin:0px'></div>
  <div id="items" class="col-5" >
  Loading...
    </div>
  <!--</body>-->
  </div>    
  <script
src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script src="https://apis.google.com/js/api.js?onload=onApiLoad">
</script>
<script>

// The code in this function runs when the page is loaded.
$(function() 
{
  google.script.run.withSuccessHandler(showItems).withUserObject(<?=page?>).getItemsHtml(<?=page?>, "Show All");
  //google.script.run.withSuccessHandler(showFilter).withUserObject(<?=page?>).getCategories();
});

function showItems(itemsHtml, page) 
{
  $('#page-header').empty().append(page);
  var html = $('#items');
  html.empty();
  for(var ii = 0; ii < itemsHtml.length; ii++)
  {
    html.append(String(itemsHtml[ii]));
  }
  return;
}

function showFilter(categories, page) 
{
  $('#filter-btn').show()
  $('#filter-options').empty();
  if(page == "Audio Hire"){var type = 0;}
  else if(page == "Visual Hire"){var type = 1;}
  else if(page == "Lighting Hire"){var type = 2;}
  else{$('#dropbtn').hide();return false;}
  for(var ii = 1; ii < categories.length; ii++)
  {
    if((categories[ii][type] == "")||(categories[ii][type] == null)||(categories[ii][type] == undefined))
    {
      return;
    }
    else
    {
      $('#filter-options').append("<button onclick='$("+'"'+"#items"+'"'+").empty().append("+'"Loading..."'+");google.script.run.withSuccessHandler(showItems).withUserObject("+'"'+page+'"'+").getItemsHtml("+'"'+page+'"'+", "+'"'+categories[ii][type]+'"'+")'>"+categories[ii][type]+"</button><br>");
    }
  }
  return;
}
</script>
<?!=include("Footer");?>
</div>
<!--</html>-->



